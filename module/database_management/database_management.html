<!DOCTYPE html>
<html>
<head>
<meta charset = "utf-8" />
<!-- plugin style -->
<link rel = "stylesheet" href = "../../plugin/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel = "stylesheet" href = "../../plugin/font-awesome/3.2.1/css/font-awesome.min.css">
<!-- custom style -->
<link rel = "stylesheet" type = "text/css" href = "./database_management.css"/>
<script src = "../../plugin/jquery/1.12.4/jquery.min.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../plugin/bootstrap/3.3.7/js/bootstrap.min.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../js/toolkit/JString.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../js/system/Configure.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSTable/JSTable.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSButton/JSButton.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSWindow/JSWindow.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSTip/JSTip.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSTextField/JSTextField.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSOptionPane/JSOptionPane.js" type = "text/javascript" charset = "utf-8"></script>
<script>
  //////////////////////////////////////////////////////////////////////////////
  // Connection List
  //////////////////////////////////////////////////////////////////////////////
  // 创建连接列表
  let conListTable = new JSTable();
  conListTable.setClass("table-striped table-bordered");
  conListTable.setThead(
    [
      {
        "text": "Name",
        "colspan": -1
      },
      {
        "text": "Driver",
        "colspan": -1
      },
      {
        "text": "User",
        "colspan": -1
      },
      {
        "text": "Url",
        "colspan": -1
      },
      {
        "text": "Operation",
        "colspan": -1
      }
    ]
  );
  conListTable.addTbody(
    [
      {
        "text": "local_mysql_ink",
        "value": "local_mysql_ink",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": "com.mysql.jdbc.Driver",
        "value": "com.mysql.jdbc.Driver",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": "root",
        "value": "root",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": "jdbc:mysql://127.0.0.1:3306/ink?useUnicode=true&characterEncoding=utf-8&useSSL=true",
        "value": "jdbc:mysql://127.0.0.1:3306/ink?useUnicode=true&characterEncoding=utf-8&useSSL=true",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": `<i class = "icon-link"></i><i class = "icon-edit"></i><i class = "icon-remove"></i>`,
        "value": "",
        "colspan": -1,
        "rowspan": -1
      }
    ]
  );
  conListTable.addTbody(
    [
      {
        "text": "local_mysql_fjerp",
        "value": "local_mysql_fjerp",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": "com.mysql.jdbc.Driver",
        "value": "com.mysql.jdbc.Driver",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": "root",
        "value": "root",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": "jdbc:mysql://127.0.0.1:3306/ink?useUnicode=true&characterEncoding=utf-8&useSSL=true",
        "value": "jdbc:mysql://127.0.0.1:3306/ink?useUnicode=true&characterEncoding=utf-8&useSSL=true",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": `<i class = "icon-link"></i><i class = "icon-edit"></i><i class = "icon-remove"></i>`,
        "value": "",
        "colspan": -1,
        "rowspan": -1
      }
    ]
  );
  conListTable.generateCode();

  // 创建连接按钮
  let createConButton = new JSButton();
  createConButton.setText("Create");
  createConButton.setClass("btn-primary");
  createConButton.generateCode();

  // 连接列表窗体对象
  let conListWindow = new JSWindow();
  conListWindow.setWindowDecorationStyle("FRAME");
  conListWindow.setTitle("Connection List")
  conListWindow.setClass("conListWindow");
  let contentCode = `
    <div>${conListTable.getCode()}</div>
    <div>${createConButton.getCode()}</div>
  `;
  conListWindow.setContent(contentCode);
  conListWindow.generateCode();

  //////////////////////////////////////////////////////////////////////////////
  // Create Connection
  //////////////////////////////////////////////////////////////////////////////
  // Name输入框
  let createConWindowNameTextField = new JSTextField();
  createConWindowNameTextField.setPlaceHolder("Name")
  createConWindowNameTextField.generateCode();

  // Driver输入框
  let createConWindowDriverTextField = new JSTextField();
  createConWindowDriverTextField.setPlaceHolder("Driver")
  createConWindowDriverTextField.generateCode();

  // User输入框
  let createConWindowUserTextField = new JSTextField();
  createConWindowUserTextField.setPlaceHolder("User")
  createConWindowUserTextField.generateCode();

  // Password输入框
  let createConWindowPasswordTextField = new JSTextField();
  createConWindowPasswordTextField.setPlaceHolder("Password")
  createConWindowPasswordTextField.setType("password");
  createConWindowPasswordTextField.generateCode();

  // Url输入框
  let createConWindowUrlTextField = new JSTextField();
  createConWindowUrlTextField.setPlaceHolder("Url")
  createConWindowUrlTextField.generateCode();

  // 测试按钮
  let createConWindowTestButton = new JSButton();
  createConWindowTestButton.setText("Test");
  createConWindowTestButton.setClass("btn-success");
  createConWindowTestButton.generateCode();

  // 提交按钮
  let createConWindowSubmitButton = new JSButton();
  createConWindowSubmitButton.setText("Submit");
  createConWindowSubmitButton.setClass("btn-primary");
  createConWindowSubmitButton.generateCode();

  // 取消按钮
  let createConWindowCancelButton = new JSButton();
  createConWindowCancelButton.setText("Cancel");
  createConWindowCancelButton.setClass("btn-default");
  createConWindowCancelButton.generateCode();

  // 创建窗口
  let createConWindow = new JSWindow();
  createConWindow.setTitle("Create Connection");
  createConWindow.setWindowDecorationStyle("DIALOG");
  createConWindow.setContent(`
    <div>${createConWindowNameTextField.getCode()}</div>
    <div>${createConWindowDriverTextField.getCode()}</div>
    <div>${createConWindowUserTextField.getCode()}</div>
    <div>${createConWindowPasswordTextField.getCode()}</div>
    <div>${createConWindowUrlTextField.getCode()}</div>
    <div>${createConWindowTestButton.getCode() + createConWindowSubmitButton.getCode() + createConWindowCancelButton.getCode()}</div>
  `);
  createConWindow.setClass("createConWindow");
  createConWindow.generateCode();

  // 输出代码
  $(document).ready(function() {
    $("#conListTableArea").html(conListWindow.getCode());
    $("#createConWindowArea").html(createConWindow.getCode());
    // 关联创建按钮打开模态窗口
    $("#" + createConButton.getId()).attr("data-toggle", "modal");
    $("#" + createConButton.getId()).attr("data-target", "#" + createConWindow.getId());
    // 关联取消按钮关闭模态窗口
    $("#" + createConWindowCancelButton.getId()).attr("data-dismiss", "modal");
  });
</script>
<title>Database Management</title>
</head>
<body>
  <div id = "conListTableArea"></div>
  <div id = "createConWindowArea"></div>
</body>
</html>
