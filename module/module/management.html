<!DOCTYPE html>
<html>
<head>
<meta charset = "utf-8" />
<!-- plugin style -->
<link rel = "stylesheet" href = "../../plugin/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel = "stylesheet" href = "../../plugin/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel = "stylesheet" href = "../../lib/gui/JSOptionPane/JSOptionPane.css">
<!-- custom style -->
<link rel = "stylesheet" type = "text/css" href = "./management.css"/>
<script src = "../../plugin/jquery/1.12.4/jquery.min.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../plugin/bootstrap/3.3.7/js/bootstrap.min.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../js/toolkit/JString.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../js/system/Configure.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSTip/JSTip.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSTable/JSTable.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSButton/JSButton.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSWindow/JSWindow.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSCheckBox/JSCheckBox.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSComboBox/JSComboBox.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSTextField/JSTextField.js" type = "text/javascript" charset = "utf-8"></script>
<script src = "../../lib/gui/JSOptionPane/JSOptionPane.js" type = "text/javascript" charset = "utf-8"></script>
<script>
  "use strict";

  //////////////////////////////////////////////////////////////////////////////
  // Module List 窗口
  //////////////////////////////////////////////////////////////////////////////
  // 创建对象
  let jsCheckBox_1 = new JSCheckBox();
  let jsCheckBox_2 = new JSCheckBox();
  jsCheckBox_2.setSelected(true);
  let jsCheckBox_3 = new JSCheckBox();
  let jsCheckBox_4 = new JSCheckBox();
  let jsCheckBox_5 = new JSCheckBox();
  let jsCheckBox_6 = new JSCheckBox();
  jsCheckBox_6.setSelected(true);
  jsCheckBox_1.generateCode();
  jsCheckBox_2.generateCode();
  jsCheckBox_3.generateCode();
  jsCheckBox_4.generateCode();
  jsCheckBox_5.generateCode();
  jsCheckBox_6.generateCode();

  // 创建模块列表
  let modTable = new JSTable();
  modTable.setClass("table-striped table-bordered");
  modTable.setThead(
    [
      {
        "text": "Name",
        "colspan": -1
      },
      {
        "text": "Description",
        "colspan": -1
      },
      {
        "text": "Source Code Rebuild",
        "colspan": -1
      },
      {
        "text": "Module Enable",
        "colspan": -1
      },
      {
        "text": "Docs Enable",
        "colspan": -1
      },
      {
        "text": "Remove",
        "colspan": -1
      }
    ]
  );
  modTable.addTbody(
    [
      {
        "text": "file_storage",
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": `<span>File Manager For Upload File</span><i class = "icon-edit"></i>`,
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": jsCheckBox_1.getCode(),
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": jsCheckBox_2.getCode(),
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": jsCheckBox_3.getCode(),
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": `<i class = "icon-remove"></i>`,
        "value": "",
        "colspan": -1,
        "rowspan": -1
      }
    ]
  );
  modTable.addTbody(
    [
      {
        "text": "filter",
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": `<span>Set Filter For Web Service</span><i class = "icon-edit"></i>`,
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": jsCheckBox_4.getCode(),
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": jsCheckBox_5.getCode(),
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": jsCheckBox_6.getCode(),
        "value": "",
        "colspan": -1,
        "rowspan": -1
      },
      {
        "text": `<i class = "icon-remove"></i>`,
        "value": "",
        "colspan": -1,
        "rowspan": -1
      }
    ]
  );
  modTable.generateCode();

  // Create按钮
  let createBtn = new JSButton();
  createBtn.setText("Create");
  createBtn.setClass("btn-primary");
  createBtn.generateCode();

  // Module List 窗口
  let listWindow = new JSWindow();
  listWindow.setWindowDecorationStyle("FRAME");
  listWindow.setTitle("Module List");
  listWindow.setClass("listWindow");
  let contentCode = `
    <div>${modTable.getCode()}</div>
    <div>${createBtn.getCode()}</div>
  `;
  listWindow.setContent(contentCode);
  listWindow.generateCode();

  //////////////////////////////////////////////////////////////////////////////
  // 删除模块确认对话框
  //////////////////////////////////////////////////////////////////////////////
  // 创建删除模块确认对话框对象
  let removeOP = new JSOptionPane();
  removeOP.setTitle("Remove Module Confirmation");
  removeOP.setMessage("Do you want to remove this module?");
  removeOP.setOptionType("YES_NO_OPTION");
  removeOP.setOptionText(["Yes", "No"]);
  removeOP.setClass("JSOptionPane_Danger removeOP");
  removeOP.generateCode();

  //////////////////////////////////////////////////////////////////////////////
  // Create Module 窗口
  //////////////////////////////////////////////////////////////////////////////

  // Name输入框
  let nameTF = new JSTextField();
  nameTF.setPlaceHolder("Name");
  nameTF.generateCode();

  // Description输入框
  let createDescTF = new JSTextField();
  createDescTF.setPlaceHolder("Description");
  createDescTF.generateCode();

  // 创建是否启用下拉菜单
  let enableCB = new JSComboBox();
  enableCB.setType("dropdown");
  enableCB.addItem({
    "type": "option",
    "text": "Module Status",
    "value": 1,
    "enable": false
  });
  enableCB.addItem({
    "type": "option",
    "text": "Enable",
    "value": 1,
    "enable": true 
  });
  enableCB.addItem({
    "type": "option",
    "text": "Disable",
    "value": 0,
    "enable": true
  });
  enableCB.setSelectedIndex(0);
  enableCB.generateCode();

  // 创建是否显示API下拉菜单
  let apiCB = new JSComboBox();
  apiCB.setType("dropdown");
  apiCB.addItem({
    "type": "option",
    "text": "Module Api",
    "value": 1,
    "enable": false
  });
  apiCB.addItem({
    "type": "option",
    "text": "Show",
    "value": 1,
    "enable": true 
  });
  apiCB.addItem({
    "type": "option",
    "text": "Hide",
    "value": 0,
    "enable": true
  });
  apiCB.setSelectedIndex(0);
  apiCB.generateCode();

  // 提交按钮
  let submitBtn = new JSButton();
  submitBtn.setText("Submit");
  submitBtn.setClass("btn-primary");
  submitBtn.generateCode();

  // 取消按钮
  let createCancelBtn = new JSButton();
  createCancelBtn.setText("Cancel");
  createCancelBtn.setClass("btn-default");
  createCancelBtn.generateCode();

  // 创建模块窗口
  let createWindow = new JSWindow();
  createWindow.setTitle("Create Module");
  createWindow.setWindowDecorationStyle("DIALOG");
  createWindow.setContent(`
    <div>${nameTF.getCode()}</div>
    <div>${createDescTF.getCode()}</div>
    <div>${enableCB.getCode()}</div>
    <div>${apiCB.getCode()}</div>
    <div>${submitBtn.getCode() + createCancelBtn.getCode()}</div>
  `);
  createWindow.setClass("createWindow");
  createWindow.generateCode();

  //////////////////////////////////////////////////////////////////////////////
  // Modify Module Description 窗口
  //////////////////////////////////////////////////////////////////////////////

  // Description输入框
  let modifyDescTF = new JSTextField();
  modifyDescTF.setPlaceHolder("Description");
  modifyDescTF.generateCode();

  // 修改按钮
  let modifyModDescWindowModifyButton = new JSButton();
  modifyModDescWindowModifyButton.setText("Modify");
  modifyModDescWindowModifyButton.setClass("btn-primary");
  modifyModDescWindowModifyButton.generateCode();

  // 取消按钮
  let modifyCancelBtn = new JSButton();
  modifyCancelBtn.setText("Cancel");
  modifyCancelBtn.setClass("btn-default");
  modifyCancelBtn.generateCode();

  // 修改模块描述窗口
  let modifyWindow = new JSWindow();
  modifyWindow.setTitle("Modify Module Description");
  modifyWindow.setWindowDecorationStyle("DIALOG");
  modifyWindow.setContent(`
    <div>${modifyDescTF.getCode()}</div>
    <div>${modifyModDescWindowModifyButton.getCode() + modifyCancelBtn.getCode()}</div>
  `);
  modifyWindow.setClass("modifyWindow");
  modifyWindow.generateCode();

  // 输出代码
  $(document).ready(function() {
    $("#listWindowArea").html(listWindow.getCode());
    $("#createWindowArea").html(createWindow.getCode());
    $("#modifyWindowArea").html(modifyWindow.getCode());
    $("#removeOPArea").html(removeOP.getCode());
    // 关联创建按钮打开模态窗口
    $("#" + createBtn.getId()).attr("data-toggle", "modal");
    $("#" + createBtn.getId()).attr("data-target", "#" + createWindow.getId());
    // 关联取消按钮关闭模态窗口
    $("#" + modifyCancelBtn.getId()).attr("data-dismiss", "modal");
    $("#" + createCancelBtn.getId()).attr("data-dismiss", "modal");
    $("#" + modTable.getId()).find("tbody").find("tr").find("td:nth-child(2)").find("i").click(function() {
      $("#showModifyWindowBtn").attr("data-target", "#" + modifyWindow.getId());
      // $("#showModifyWindowBtn").attr("data-id", "");
      $("#showModifyWindowBtn").trigger("click");
    });
    $("#" + modTable.getId()).find("tbody").find("tr").find("td:last-child").find("i").click(function() {
      $("#showRemoveOPBtn").attr("data-target", "#" + removeOP.getId());
      // $("#showRemoveOPBtn").attr("data-id", "");
      $("#showRemoveOPBtn").trigger("click");
    });
  });
</script>
<title>Module Management</title>
</head>
<body>
  <div id = "listWindowArea"></div>
  <div id = "createWindowArea"></div>
  <div id = "modifyWindowArea"></div>
  <div id = "removeOPArea"></div>
  <button style = "display: none;" type = "button" id = "showModifyWindowBtn" data-toggle = "modal"></button>
  <button style = "display: none;" type = "button" id = "showRemoveOPBtn" data-toggle = "modal"></button>
</body>
</html>
